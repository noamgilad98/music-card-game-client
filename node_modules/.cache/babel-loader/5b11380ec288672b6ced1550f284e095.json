{"ast":null,"code":"import React,{useState}from'react';import Header from'./components/Header';import StartGameButton from'./components/buttons/StartGameButton';import GetCardButton from'./components/buttons/GetCardButton';import SubmitButton from'./components/buttons/SubmitButton';import Timeline from'./components/Timeline';import Card from'./components/Card';import{startGame,getCard,submitAndValidate}from'./services/api';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[player,setPlayer]=useState(null);const[cards,setCards]=useState([]);const[currentCard,setCurrentCard]=useState(null);const[audio,setAudio]=useState(null);const[isCardPlaced,setIsCardPlaced]=useState(false);const handleStartGame=async playerName=>{try{const gameData=await startGame(playerName);setPlayer(gameData.player);setCards([gameData.card]);playSong(gameData.card.previewUrl);setIsCardPlaced(true);}catch(error){console.error('Error starting game:',error);}};const handleGetCard=async()=>{if(!player||isCardPlaced)return;try{const card=await getCard(player.id);setCurrentCard(card);playSong(card.previewUrl);setIsCardPlaced(true);}catch(error){console.error('Error getting card:',error);}};const playSong=url=>{if(audio){audio.pause();}const newAudio=new Audio(url);newAudio.play();setAudio(newAudio);};const handleSubmitCard=async()=>{if(!player||!currentCard)return;try{const updatedCards=[...cards,currentCard];const result=await submitAndValidate(player.id,currentCard);if(result.isValid){setCards(updatedCards);}setCurrentCard(null);setIsCardPlaced(false);}catch(error){console.error('Error submitting card:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),!player?/*#__PURE__*/_jsx(StartGameButton,{onStartGame:handleStartGame}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Timeline,{cards:cards}),currentCard&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Place the card:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{card:currentCard})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(GetCardButton,{onAddCard:handleGetCard,disabled:isCardPlaced}),/*#__PURE__*/_jsx(SubmitButton,{onSubmit:handleSubmitCard})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","Header","StartGameButton","GetCardButton","SubmitButton","Timeline","Card","startGame","getCard","submitAndValidate","jsx","_jsx","jsxs","_jsxs","App","player","setPlayer","cards","setCards","currentCard","setCurrentCard","audio","setAudio","isCardPlaced","setIsCardPlaced","handleStartGame","playerName","gameData","card","playSong","previewUrl","error","console","handleGetCard","id","url","pause","newAudio","Audio","play","handleSubmitCard","updatedCards","result","isValid","className","children","onStartGame","onAddCard","disabled","onSubmit"],"sources":["/Users/noamgilad/Downloads/music-card-game-client/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Header from './components/Header';\nimport StartGameButton from './components/buttons/StartGameButton';\nimport GetCardButton from './components/buttons/GetCardButton';\nimport SubmitButton from './components/buttons/SubmitButton';\nimport Timeline from './components/Timeline';\nimport Card from './components/Card';\nimport { startGame, getCard, submitAndValidate } from './services/api';\nimport './App.css';\n\nfunction App() {\n    const [player, setPlayer] = useState(null);\n    const [cards, setCards] = useState([]);\n    const [currentCard, setCurrentCard] = useState(null);\n    const [audio, setAudio] = useState(null);\n    const [isCardPlaced, setIsCardPlaced] = useState(false);\n\n    const handleStartGame = async (playerName) => {\n        try {\n            const gameData = await startGame(playerName);\n            setPlayer(gameData.player);\n            setCards([gameData.card]);\n            playSong(gameData.card.previewUrl);\n            setIsCardPlaced(true);\n        } catch (error) {\n            console.error('Error starting game:', error);\n        }\n    };\n\n    const handleGetCard = async () => {\n        if (!player || isCardPlaced) return;\n        try {\n            const card = await getCard(player.id);\n            setCurrentCard(card);\n            playSong(card.previewUrl);\n            setIsCardPlaced(true);\n        } catch (error) {\n            console.error('Error getting card:', error);\n        }\n    };\n\n    const playSong = (url) => {\n        if (audio) {\n            audio.pause();\n        }\n        const newAudio = new Audio(url);\n        newAudio.play();\n        setAudio(newAudio);\n    };\n\n    const handleSubmitCard = async () => {\n        if (!player || !currentCard) return;\n        try {\n            const updatedCards = [...cards, currentCard];\n            const result = await submitAndValidate(player.id, currentCard);\n            if (result.isValid) {\n                setCards(updatedCards);\n            }\n            setCurrentCard(null);\n            setIsCardPlaced(false);\n        } catch (error) {\n            console.error('Error submitting card:', error);\n        }\n    };\n\n    return (\n        <div className=\"App\">\n            <Header />\n            {!player ? (\n                <StartGameButton onStartGame={handleStartGame} />\n            ) : (\n                <div>\n                    <Timeline cards={cards} />\n                    {currentCard && (\n                        <div>\n                            <p>Place the card:</p>\n                            <div>\n                                <Card card={currentCard} />\n                            </div>\n                        </div>\n                    )}\n                    <div className=\"button-group\">\n                        <GetCardButton onAddCard={handleGetCard} disabled={isCardPlaced} />\n                        <SubmitButton onSubmit={handleSubmitCard} />\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}